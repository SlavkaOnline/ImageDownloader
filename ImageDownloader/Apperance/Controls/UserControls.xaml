<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:ImageDownloader.Converters"
    xmlns:local="clr-namespace:ImageDownloader.Apperance.Controls">

    <Style
        x:Key="ImageDownloaderFilStyle"
        TargetType="UserControl">
        <Setter Property="Width">
            <Setter.Value>
                <MultiBinding>
                    <Binding
                        Path="ActualWidth"
                        RelativeSource="{RelativeSource FindAncestor,
                                                        AncestorType={x:Type StackPanel}}" />
                    <Binding
                        Path="Children.Count"
                        RelativeSource="{RelativeSource FindAncestor,
                                                        AncestorType={x:Type StackPanel}}" />
                    <MultiBinding.Converter>
                        <converters:PanelChildrenCountToWidth />
                    </MultiBinding.Converter>

                </MultiBinding>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>